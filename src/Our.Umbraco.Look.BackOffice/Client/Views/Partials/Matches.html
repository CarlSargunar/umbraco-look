<div ng-controller="Look.BackOffice.MatchesController">

    <div lazy-load="getMoreMatches()">
        <!--<pre>matches[0] = {{ matches[0] | json }}</pre>-->
        <div ng-repeat="match in matches">

            <div class="look-match-breaker" ng-if="nameBreaker(match, matches[$index -1])">
                <p>{{match.name.charAt(0)}}</p>
            </div>

            <div class="look-match">
                
                <span class="look-match-score">{{match.score}}</span>
                
                <span class="look-match-type{{match.isDetached ? ' look-match-detached' : ''}}">
                    <span class="look-match-detached-icon icon-out" ng-if="match.isDetached">&nbsp;</span>
                    <span class="look-match-icon {{match.icon}}">&nbsp;</span>                                        
                </span>

                <!--<span class="match-id">{{match.id}}</span> |-->
                <!--<span class="match-key">{{match.key}}</span> |--> 

                <div class="look-match-details">
                    <div><span>Name: </span> {{match.name}}</div>
                    <div><span>Date: </span> {{match.date}}</div>
                    <div><span>Path: </span> {{match.path}}<a href="{{match.link}}">{{match.linkText}}</a>{{ match.isDetached ? '\\' + match.name : ''}}</div>
                </div>

                
                <div class="look-match-tags">
                    <!-- angularjs. 1.1.5 doesn't lend itself to ng-repeat with dl markup https://stackoverflow.com/questions/10457833/how-would-i-render-a-dynamic-definition-list-using-angularjs -->
                    <div class="look-match-tag-group" ng-repeat="tagGroup in match.tagGroups">

                        <span class="icon icon-tags">&nbsp;</span>
                        <a ng-if="tagGroup.link !== null" href="{{tagGroup.link}}">{{ tagGroup.name ? tagGroup.name : '&lt;Default&gt;' }}</a>
                        <span ng-if="tagGroup.link === null">{{ tagGroup.name ? tagGroup.name : '&lt;Default&gt;' }}</span>
                                                
                        <span class="look-match-tag" ng-repeat="tag in tagGroup.tags">
                            <span class="icon icon-tag">&nbsp;</span>
                            <a ng-if="tag.link !== null" href="{{tag.link}}">{{tag.name}}</a>
                            <span ng-if="tag.link === null">{{tag.name}}</span>
                            <!--{{ $last ? '.' : ', '}}-->
                        </span>
                    </div>
                </div>

                <div style="clear:both;"></div>
            </div>
            

        </div>

    </div>

    <div class="look-banner" ng-show="currentlyLoading">Loading... <a href="" ng-click="cancelGetMoreMatches()">Cancel</a>.</div>
    <div class="look-banner" ng-show="finishedLoading && matches.length === 0">No Matches.</div>
    <div class="look-banner" ng-show="finishedLoading && matches.length === 1">Found 1 Match. <a href="" ng-click="reload()">Reload</a></div>
    <div class="look-banner" ng-show="finishedLoading && matches.length > 1">Found {{matches.length}} Matches. <a href="" ng-click="reload()">Reload</a></div>

</div>
