<div ng-controller="Look.BackOffice.MatchesController">

    <div lazy-load="getMoreMatches()">
        <!--<pre>matches[0] = {{ matches[0] | json }}</pre>-->
        <div ng-repeat="match in matches">

            <div class="look-match-breaker" ng-if="nameBreaker(match, matches[$index -1])">
                <p>{{match.name.charAt(0)}}</p>
            </div>

            <div class="look-match">
                <a href="{{match.link}}">
                    <span class="{{match.icon}} look-match-icon">&nbsp;</span>
                </a>

                <span class="match-is-detached">{{match.isDetached}}</span>

                <!--<span class="match-id">{{match.id}}</span> |-->
                <!--<span class="match-key">{{match.key}}</span> |--> 
                <span class="look-match-name">{{match.name}}</span>
                <span class="look-match-date">{{match.date}}</span>

                <!-- https://stackoverflow.com/questions/10457833/how-would-i-render-a-dynamic-definition-list-using-angularjs -->
                <div class="look-match-tags">

                    <div class="look-match-tag-group" ng-repeat="tagGroup in match.tagGroups">

                        <span class="icon icon-tags">&nbsp;</span>
                        <a ng-if="tagGroup.link !== null" href="{{tagGroup.link}}">{{ tagGroup.name ? tagGroup.name : '&lt;Default&gt;' }}</a>
                        <span ng-if="tagGroup.link === null">{{ tagGroup.name ? tagGroup.name : '&lt;Default&gt;' }}</span>
                                                
                        <span class="look-match-tag" ng-repeat="tag in tagGroup.tags">
                            <span class="icon icon-tag">&nbsp;</span>
                            <a ng-if="tag.link !== null" href="{{tag.link}}">{{tag.name}}</a>
                            <span ng-if="tag.link === null">{{tag.name}}</span>
                            <!--{{ $last ? '.' : ', '}}-->
                        </span>
                    </div>

                </div>


                <span class="look-match-score">{{match.score}}</span>
            </div>
        </div>
    </div>

    <div class="info-banner" ng-show="currentlyLoading">Loading... <a href="" ng-click="cancelGetMoreMatches()">Cancel</a>.</div>
    <div class="info-banner" ng-show="finishedLoading && matches.length == 0">No Matches.</div>
    <div class="info-banner" ng-show="finishedLoading && matches.length > 0">Finished Loading. <a href="" ng-click="refresh()">Refresh</a></div>

</div>
